<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Dancing+Script:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Dancing+Script:wght@400..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <title>FOR BEST HR</title>
    <style>
      body {
        user-select: none;
        width: 100%;
        margin: 0;
        overflow: hidden;
        background: rgb(34, 34, 34);
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-image: linear-gradient(
          to right top,
          hsla(0, 5%, 15%, 0.5),
          hsla(0, 5%, 5%, 1)
        );

        background-image: -moz-linear-gradient(
          to right top,
          hsla(0, 5%, 15%, 0.5),
          hsla(0, 5%, 5%, 1)
        );
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      :root {
        --button-height: 2rem;
        --button-color: rgb(138, 138, 138);
      }

      .fake-player {
        display: flex;
        opacity: 0.8;
        justify-content: center;
        align-items: center;
        width: 4rem;
        padding: 2rem;
        border: 0.5rem solid var(--button-color);
        border-radius: 50%;
        filter: drop-shadow(0 0 3.1rem rgba(0, 0, 0, 0.8));
      }

      button {
        margin: 0;
        padding: 0;
      }

      .play {
        height: 0;
        width: 0;
        margin-left: calc(2 * 0.14 * var(--button-height));
        background: none;
        border: none;
        border-top: var(--button-height) solid transparent;
        border-bottom: var(--button-height) solid transparent;
        border-left: calc(var(--button-height) * 2 * 0.86) solid
          var(--button-color);
      }

      .pause {
        position: relative;
        background: none;
        border: none;
        height: calc(var(--button-height) * 2);
        width: calc(var(--button-height) * 2 * 0.86);
        &:before,
        &:after {
          content: "";
          position: absolute;
          top: 0;
          height: 100%;
          width: 33%;
          background: var(--button-color);
        }
        &:before {
          left: 0;
        }
        &:after {
          right: 0;
        }
      }

      .hidden {
        display: none;
      }
      p {
        text-align: center;
        width: 100%;
        color: hsla(0, 50%, 50%, 1);
        font-size: 6em;
        text-shadow: 1px 1px hsla(0, 0%, 5%, 1), -1px -1px hsla(0, 0%, 5%, 1);
        font-family: "Poiret One", cursive;
        letter-spacing: 6px;
        text-align: center;
        position: relative;
        margin-top: 40vh;
      }
      .card {
        position: relative;
        background-color: rgba(128, 128, 128, 0.504);
        height: 80vh;
        width: 50vw;
        border-radius: 10%;
        display: flex;
        align-items: center;
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        flex-direction: column;
        justify-content: space-around;
      }
      .song {
        width: 80%;
        height: 40%;
        display: flex;
        align-items: center;
        justify-content: space-around;
      }

      .songicon {
        background-image: url(https://s.dou.ua/img/avatars/80x80_813469.jpg);
        height: 10vw;
        width: 10vw;filter: blur(5px);
        border-radius: 10%;
        background-size: cover;
      }
      .songtitle {
        font-size: 35px;
        text-align: center;
        color: #ffffffcc;
        font-family: "Caveat";
        font-optical-sizing: auto;
      }

      .res {
        height: 80%;
        width: 30%;
        border-radius: 40%;
        background-color: black;
      }
      #res2 {
        visibility: hidden;

        position: relative;
      }
      input[type="range"] {
        margin-top: 40px;
        margin-bottom: 20px;
        -webkit-appearance: none;

        width: 150px;
        height: 10px;
        background: #c0c0c0cc;
        outline: none;
        opacity: 0.95;
        -webkit-transition: 0.2s;
        transition: opacity 0.2s;
        border-radius: 5px;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background-color: #c5c5c5;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid #848080;
      }
      .lyricsP {
        font-size: 20px;
        padding: 20px;
        color: #ffffffcc;
        font-weight: 700;
        margin: 0px;
        font-family: "Noto Sans", sans-serif;
      }
      .lyrics {
        width: 80%;
        height: 50%;

        display: flex;
        flex-direction: column;
        font-size: 20px;
        align-items: center;
        overflow-y: hidden;
        overflow-x: hidden;
      }
      .playcont {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      @media screen and (max-width: 850px) {
        html {
          font-size: 3vw;
        }
        .card {
          background-color: rgb(30, 29, 29);
          width: 100vw;
          height: 100vh;
          border-radius: 0px;
        }
        .playcont {
          position: absolute;
          justify-content: center;
          align-items: center;
          height: 80vw;
        }
        .songicon {
          margin-top: 10vw;
          height: 35vw;
          width: 35vw;
        }
        #volumeRange {
          display: none;
          margin-top: 30vw;
        }
      }

      @media screen and (max-width: 550px) {
        html {
          font-size: 4vw;
        }
        .card {
          background-color: rgb(30, 29, 29);
          width: 100vw;
          height: 100vh;
          border-radius: 0px;
        }
        .playcont {
          position: absolute;
          justify-content: center;
          align-items: center;
          height: 80vw;
        }
        .songicon {
          margin-top: 10vw;
          height: 50vw;
          width: 50vw;
        }
        #volumeRange {
          display: none;
          margin-top: 30vw;
        }
      }

      @media screen and (max-width: 320px) {
        html {
          font-size: 7vw;
        }
        .card {
          width: 100vw;
          height: 100vh;
          border-radius: 0px;
        }
        .playcont {
          position: absolute;
          justify-content: space-between;
          align-items: center;
          height: 80vw;
        }
        .songicon {
          height: 70vw;
          width: 70vw;
        }
        #volumeRange {
          margin-top: 25vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="song">
        <div class="conteiner">
          <div class="songicon" id="songicon"></div>
          <div class="songtitle">Василина</div>
        </div>
        <div class="playcont" style="">
          <div class="fake-player">
            <button role="play" class="play"></button>
            <button role="pause" class="pause hidden"></button>
          </div>
          <input
            type="range"
            id="volumeRange"
            min="0"
            max="1"
            step="0.01"
            value="0.5"
          />
        </div>
      </div>
      <div class="lyrics" id="lyricsConteiner">
        <p class="lyricsP">Текст Пісні</p>
      </div>
    </div>
    <audio src="./Vasylyna.mp3" id="audio" style="display: none"></audio>

    <script>
      let unpreptext = `Біля хати Василини затоптали трави,
      Затоптали буйні трави хлопці кучеряві
      Та вертаються додому всі із гарбузами.
      Що ж ти робиш, Василино, з тими леґінями?
      І співає Верховина, дзвінко пісня лине,
      Дзвінко!
      Василино, Василино, люба Василино!
      Василино, Василино, файна Василино!
      Із краси води не пити, знаю добре, знаю
      Та чомусь твоєї хати також не минаю.
      Посміхнися, озовися, верховинко люба,
      Стану я в твоєму серці золотим відлунням!
      І співає Верховина, дзвінко пісня лине,
      Дзвінко!
      Василино, Василино, люба Василино!
      Василино, Василино, файна Василино!
      І співає Верховина, дзвінко пісня лине,
      Василино, Василино, люба Василино!
      Василино, Василино, файна Васили
      Файна Василино!
      І співає Верховина, дзвінко пісня лине,
      Дзвінко!
      Василино, Василино, люба Василино!
      Василино, Василино, файна Василино!`;

      let lyrics = unpreptext.split(/\n/g);
      const lyrCont = document.getElementById("lyricsConteiner");
      const audio = document.getElementById("audio");
      const range = document.getElementById("volumeRange");
      audio.volume = range.value;

      range.addEventListener("input", () => {
        audio.volume = range.value;
      });

      const player = document.querySelector(".fake-player");
      let isPlay = false;
      let lyricIndex = 0;
      let timeoutToclear;
      let delay = audio.currentTime < 33 ? 4500 : 35 - audio.currentTime;

      function clickHandler() {
        if (isPlay) {
          audio.pause();
          isPlay = false;

          lyrCont.innerHTML = "<p class='lyricsP'>Текст Пісні</p>";
          clearTimeout(timeoutToclear);
        } else {
          delay =
            audio.currentTime < 33 ? (32 - audio.currentTime) * 1000 : 2000;

          audio.play();
          isPlay = true;

          timeoutToclear = setTimeout(() => {
            insertTextIntoLyrics(lyricIndex);
          }, delay);
        }

        const buttons = Array.from(this.children);
        buttons.forEach((button) => button.classList.toggle("hidden"));
      }

      player.addEventListener("click", clickHandler);

      function insertTextIntoLyrics(i) {
        if (isPlay) {
          if (i < lyrics.length) {
            let timeout = lyricIndex === 7 || lyricIndex === 15 ? 16000 : 4500;
            let p = document.createElement("p");
            p.classList.add("lyricsP");
            p.innerText = lyrics[i];
            lyrCont.insertAdjacentElement("afterbegin", p);
            lyricIndex++;

            timeoutToclear = setTimeout(() => {
              insertTextIntoLyrics(lyricIndex);
            }, timeout);
          }
        }
      }

      audio.addEventListener("ended", () => {
        lyricIndex = 0;
        audio.currentTime=0;
        timeoutToclear = setTimeout(() => {
            insertTextIntoLyrics(lyricIndex);
          }, 33000);
      });
    </script>
  </body>
</html>
